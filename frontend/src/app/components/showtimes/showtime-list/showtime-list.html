<div class="animate-[fadeIn_0.3s_ease-out]">
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <h1 class="text-3xl font-bold text-purple-400">
      <svg class="inline w-8 h-8 mr-2 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
        <path
          fill-rule="evenodd"
          d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
          clip-rule="evenodd"
        ></path>
      </svg>
      Showtimes
    </h1>
    <a
      routerLink="/dashboard/showtimes/create"
      class="px-4 py-2 font-semibold text-white transition-colors bg-purple-500 rounded-lg shadow-lg hover:bg-purple-400 hover:shadow-purple-500/60"
    >
      <svg class="inline w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
        <path
          fill-rule="evenodd"
          d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
          clip-rule="evenodd"
        ></path>
      </svg>
      New Showtime
    </a>
  </div>

  <!-- Error Message -->
  @if (errorMessage) {
  <div class="p-4 mb-6 border border-red-500 rounded-lg bg-red-900/50">
    <p class="text-sm text-red-200">{{ errorMessage }}</p>
  </div>
  }

  <!-- Loading State -->
  @if (isLoading) {
  <div class="py-12 text-center">
    <div class="inline-block w-12 h-12 border-t-2 border-b-2 rounded-full animate-spin"></div>
    <p class="mt-4 text-gray-200">Loading showtimes...</p>
  </div>
  }

  <!-- Showtimes List -->
  @else if (showtimes.length > 0) {
  <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
    @for (showtime of showtimes; track showtime._id) {
    <div
      class="p-6 transition-all border-2 shadow-2xl bg-cinema-accent rounded-xl shadow-cinema-purple/20 border-cinema-purple/30 hover:border-purple-neon hover:shadow-cinema-purple/40"
    >
      <div class="flex flex-col h-full">
        <div class="flex-1">
          <h3 class="mb-3 text-xl font-bold text-purple-400">
            <svg class="inline w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"
              ></path>
            </svg>
            {{ getMovieTitle(showtime) }}
          </h3>

          <div class="space-y-2 text-sm text-gray-200">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path
                  d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"
                ></path>
              </svg>
              <span><strong>Room:</strong> {{ getRoomName(showtime) }}</span>
            </div>

            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              <span><strong>From:</strong> {{ formatDate(showtime.start_time) }}</span>
            </div>

            <div class="flex items-center">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              <span><strong>To:</strong> {{ formatDate(showtime.end_time) }}</span>
            </div>
          </div>
        </div>

        <div class="flex gap-3 mt-4">
          <a
            [routerLink]="['/dashboard/showtimes/edit', showtime._id]"
            class="flex-1 px-4 py-2 font-semibold text-center text-white transition-colors border-0 rounded-lg shadow-lg bg-purple-neon hover:bg-cinema-purple"
          >
            <svg class="inline w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
              ></path>
            </svg>
          </a>
          <button
            (click)="deleteShowtime(showtime._id!)"
            class="flex-1 px-4 py-2 font-semibold text-white transition-colors border-2 rounded-lg bg-red-cinema-dark border-red-cinema hover:bg-red-cinema"
          >
            <svg class="inline w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
    }
  </div>
  }

  <!-- Empty State -->
  @else {
  <div class="py-12 text-center card-cinema">
    <svg class="w-16 h-16 mx-auto mb-4 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
      <path
        fill-rule="evenodd"
        d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
        clip-rule="evenodd"
      ></path>
    </svg>
    <h3 class="mb-2 text-xl font-semibold text-gray-200">No showtimes registered</h3>
    <p class="mb-4 text-gray-500">Start by scheduling your first showtime</p>
    <a
      routerLink="/dashboard/showtimes/create"
      class="inline-block px-4 py-2 font-semibold text-gray-900 transition-colors bg-yellow-500 rounded-lg shadow-lg hover:bg-yellow-400"
    >
      Add Showtime
    </a>
  </div>
  }
</div>
